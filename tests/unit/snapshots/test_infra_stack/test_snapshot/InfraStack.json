{"Resources": {"demofunctionServiceRoleD7405739": {"Type": "AWS::IAM::Role", "Properties": {"AssumeRolePolicyDocument": {"Statement": [{"Action": "sts:AssumeRole", "Effect": "Allow", "Principal": {"Service": "lambda.amazonaws.com"}}], "Version": "2012-10-17"}, "ManagedPolicyArns": [{"Fn::Join": ["", ["arn:", {"Ref": "AWS::Partition"}, ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}, "demofunctionServiceRoleDefaultPolicy6CB8525B": {"Type": "AWS::IAM::Policy", "Properties": {"PolicyDocument": {"Statement": [{"Action": ["xray:PutTraceSegments", "xray:PutTelemetryRecords"], "Effect": "Allow", "Resource": "*"}], "Version": "2012-10-17"}, "PolicyName": "demofunctionServiceRoleDefaultPolicy6CB8525B", "Roles": [{"Ref": "demofunctionServiceRoleD7405739"}]}}, "demofunction8649910A": {"Type": "AWS::Lambda::Function", "Properties": {"Architectures": ["arm64"], "Code": {"S3Bucket": {"Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"}, "S3Key": "70cb809ad0780e3cea90f0289240d5884f6182653089fe6efc2cc9cb21282603.zip"}, "Environment": {"Variables": {"POWERTOOLS_SERVICE_NAME": "demo-function", "POWERTOOLS_LOG_LEVE": "INFO"}}, "Handler": "main.handler", "Layers": [{"Fn::Join": ["", ["arn:aws:lambda:", {"Ref": "AWS::Region"}, ":017000801446:layer:AWSLambdaPowertoolsPythonV3-python312-arm64:2"]]}], "MemorySize": 128, "Role": {"Fn::GetAtt": ["demofunctionServiceRoleD7405739", "Arn"]}, "Runtime": "python3.12", "TracingConfig": {"Mode": "Active"}}, "DependsOn": ["demofunctionServiceRoleDefaultPolicy6CB8525B", "demofunctionServiceRoleD7405739"]}, "demofunctionLogRetentionCDDE420E": {"Type": "Custom::LogRetention", "Properties": {"ServiceToken": {"Fn::GetAtt": ["LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A", "Arn"]}, "LogGroupName": {"Fn::Join": ["", ["/aws/lambda/", {"Ref": "demofunction8649910A"}]]}, "RetentionInDays": 1}}, "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB": {"Type": "AWS::IAM::Role", "Properties": {"AssumeRolePolicyDocument": {"Statement": [{"Action": "sts:AssumeRole", "Effect": "Allow", "Principal": {"Service": "lambda.amazonaws.com"}}], "Version": "2012-10-17"}, "ManagedPolicyArns": [{"Fn::Join": ["", ["arn:", {"Ref": "AWS::Partition"}, ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}, "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB": {"Type": "AWS::IAM::Policy", "Properties": {"PolicyDocument": {"Statement": [{"Action": ["logs:PutRetentionPolicy", "logs:DeleteRetentionPolicy"], "Effect": "Allow", "Resource": "*"}], "Version": "2012-10-17"}, "PolicyName": "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB", "Roles": [{"Ref": "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"}]}}, "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A": {"Type": "AWS::Lambda::Function", "Properties": {"Handler": "index.handler", "Runtime": {"Fn::FindInMap": ["LatestNodeRuntimeMap", {"Ref": "AWS::Region"}, "value"]}, "Timeout": 900, "Code": {"S3Bucket": {"Fn::Sub": "cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"}, "S3Key": "2819175352ad1ce0dae768e83fc328fb70fb5f10b4a8ff0ccbcb791f02b0716d.zip"}, "Role": {"Fn::GetAtt": ["LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB", "Arn"]}}, "DependsOn": ["LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB", "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"]}, "Rule4C995B7F": {"Type": "AWS::Events::Rule", "Properties": {"ScheduleExpression": "cron(/5 * ? * MON-FRI *)", "State": "ENABLED", "Targets": [{"Arn": {"Fn::GetAtt": ["demofunction8649910A", "Arn"]}, "Id": "Target0"}]}}, "RuleAllowEventRuleteststackdemofunctionF84CC13E87C795CD": {"Type": "AWS::Lambda::Permission", "Properties": {"Action": "lambda:InvokeFunction", "FunctionName": {"Fn::GetAtt": ["demofunction8649910A", "Arn"]}, "Principal": "events.amazonaws.com", "SourceArn": {"Fn::GetAtt": ["Rule4C995B7F", "Arn"]}}}}, "Mappings": {"LatestNodeRuntimeMap": {"af-south-1": {"value": "nodejs20.x"}, "ap-east-1": {"value": "nodejs20.x"}, "ap-northeast-1": {"value": "nodejs20.x"}, "ap-northeast-2": {"value": "nodejs20.x"}, "ap-northeast-3": {"value": "nodejs20.x"}, "ap-south-1": {"value": "nodejs20.x"}, "ap-south-2": {"value": "nodejs20.x"}, "ap-southeast-1": {"value": "nodejs20.x"}, "ap-southeast-2": {"value": "nodejs20.x"}, "ap-southeast-3": {"value": "nodejs20.x"}, "ap-southeast-4": {"value": "nodejs20.x"}, "ap-southeast-5": {"value": "nodejs20.x"}, "ap-southeast-7": {"value": "nodejs20.x"}, "ca-central-1": {"value": "nodejs20.x"}, "ca-west-1": {"value": "nodejs20.x"}, "cn-north-1": {"value": "nodejs18.x"}, "cn-northwest-1": {"value": "nodejs18.x"}, "eu-central-1": {"value": "nodejs20.x"}, "eu-central-2": {"value": "nodejs20.x"}, "eu-isoe-west-1": {"value": "nodejs18.x"}, "eu-north-1": {"value": "nodejs20.x"}, "eu-south-1": {"value": "nodejs20.x"}, "eu-south-2": {"value": "nodejs20.x"}, "eu-west-1": {"value": "nodejs20.x"}, "eu-west-2": {"value": "nodejs20.x"}, "eu-west-3": {"value": "nodejs20.x"}, "il-central-1": {"value": "nodejs20.x"}, "me-central-1": {"value": "nodejs20.x"}, "me-south-1": {"value": "nodejs20.x"}, "mx-central-1": {"value": "nodejs20.x"}, "sa-east-1": {"value": "nodejs20.x"}, "us-east-1": {"value": "nodejs20.x"}, "us-east-2": {"value": "nodejs20.x"}, "us-gov-east-1": {"value": "nodejs18.x"}, "us-gov-west-1": {"value": "nodejs18.x"}, "us-iso-east-1": {"value": "nodejs18.x"}, "us-iso-west-1": {"value": "nodejs18.x"}, "us-isob-east-1": {"value": "nodejs18.x"}, "us-west-1": {"value": "nodejs20.x"}, "us-west-2": {"value": "nodejs20.x"}}}, "Parameters": {"BootstrapVersion": {"Type": "AWS::SSM::Parameter::Value<String>", "Default": "/cdk-bootstrap/hnb659fds/version", "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"}}, "Rules": {"CheckBootstrapVersion": {"Assertions": [{"Assert": {"Fn::Not": [{"Fn::Contains": [["1", "2", "3", "4", "5"], {"Ref": "BootstrapVersion"}]}]}, "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."}]}}}